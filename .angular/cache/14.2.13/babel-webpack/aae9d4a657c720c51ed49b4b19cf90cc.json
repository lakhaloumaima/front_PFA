{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { InjectionToken, NgModule } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { share } from 'rxjs/operators';\nimport * as io from 'socket.io-client';\n\nclass WrappedSocket {\n  config;\n  subscribersCounter = {};\n  eventObservables$ = {};\n  ioSocket;\n  emptyConfig = {\n    url: '',\n    options: {}\n  };\n\n  constructor(config) {\n    this.config = config;\n\n    if (config === undefined) {\n      config = this.emptyConfig;\n    }\n\n    const url = config.url;\n    const options = config.options;\n    const ioFunc = io.default ? io.default : io;\n    this.ioSocket = ioFunc(url, options);\n  }\n\n  of(namespace) {\n    this.ioSocket.of(namespace);\n  }\n\n  on(eventName, callback) {\n    this.ioSocket.on(eventName, callback);\n  }\n\n  once(eventName, callback) {\n    this.ioSocket.once(eventName, callback);\n  }\n\n  connect(callback) {\n    return this.ioSocket.connect(callback);\n  }\n\n  disconnect(_close) {\n    return this.ioSocket.disconnect.apply(this.ioSocket, arguments);\n  }\n\n  emit(_eventName, ..._args) {\n    return this.ioSocket.emit.apply(this.ioSocket, arguments);\n  }\n\n  removeListener(_eventName, _callback) {\n    return this.ioSocket.removeListener.apply(this.ioSocket, arguments);\n  }\n\n  removeAllListeners(_eventName) {\n    return this.ioSocket.removeAllListeners.apply(this.ioSocket, arguments);\n  }\n\n  fromEvent(eventName) {\n    if (!this.subscribersCounter[eventName]) {\n      this.subscribersCounter[eventName] = 0;\n    }\n\n    this.subscribersCounter[eventName]++;\n\n    if (!this.eventObservables$[eventName]) {\n      this.eventObservables$[eventName] = new Observable(observer => {\n        const listener = data => {\n          observer.next(data);\n        };\n\n        this.ioSocket.on(eventName, listener);\n        return () => {\n          this.subscribersCounter[eventName]--;\n\n          if (this.subscribersCounter[eventName] === 0) {\n            this.ioSocket.removeListener(eventName, listener);\n            delete this.eventObservables$[eventName];\n          }\n        };\n      }).pipe(share());\n    }\n\n    return this.eventObservables$[eventName];\n  }\n\n  fromOneTimeEvent(eventName) {\n    return new Promise(resolve => this.once(eventName, resolve));\n  }\n\n  listeners(eventName) {\n    return this.ioSocket.listeners(eventName);\n  }\n\n  listenersAny() {\n    return this.ioSocket.listenersAny();\n  }\n\n  listenersAnyOutgoing() {\n    return this.ioSocket.listenersAnyOutgoing();\n  }\n\n  off(eventName, listener) {\n    if (!eventName) {\n      // Remove all listeners for all events\n      return this.ioSocket.offAny();\n    }\n\n    if (eventName && !listener) {\n      // Remove all listeners for that event\n      return this.ioSocket.off(eventName);\n    } // Removes the specified listener from the listener array for the event named\n\n\n    return this.ioSocket.off(eventName, listener);\n  }\n\n  onAny(callback) {\n    return this.ioSocket.onAny(callback);\n  }\n\n  onAnyOutgoing(callback) {\n    return this.ioSocket.onAnyOutgoing(callback);\n  }\n\n  prependAny(callback) {\n    return this.ioSocket.prependAny(callback);\n  }\n\n  prependAnyOutgoing(callback) {\n    return this.ioSocket.prependAnyOutgoing(callback);\n  }\n\n  timeout(value) {\n    return this.ioSocket.timeout(value);\n  }\n\n  volatile() {\n    return this.ioSocket.volatile;\n  }\n\n}\n/** Socket factory */\n\n\nfunction SocketFactory(config) {\n  return new WrappedSocket(config);\n}\n\nconst SOCKET_CONFIG_TOKEN = new InjectionToken('__SOCKET_IO_CONFIG__');\n\nclass SocketIoModule {\n  static forRoot(config) {\n    return {\n      ngModule: SocketIoModule,\n      providers: [{\n        provide: SOCKET_CONFIG_TOKEN,\n        useValue: config\n      }, {\n        provide: WrappedSocket,\n        useFactory: SocketFactory,\n        deps: [SOCKET_CONFIG_TOKEN]\n      }]\n    };\n  }\n\n  static ɵfac = function SocketIoModule_Factory(t) {\n    return new (t || SocketIoModule)();\n  };\n  static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: SocketIoModule\n  });\n  static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n}\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SocketIoModule, [{\n    type: NgModule,\n    args: [{}]\n  }], null, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { WrappedSocket as Socket, SocketIoModule };","map":{"version":3,"names":["i0","InjectionToken","NgModule","Observable","share","io","WrappedSocket","config","subscribersCounter","eventObservables$","ioSocket","emptyConfig","url","options","constructor","undefined","ioFunc","default","of","namespace","on","eventName","callback","once","connect","disconnect","_close","apply","arguments","emit","_eventName","_args","removeListener","_callback","removeAllListeners","fromEvent","observer","listener","data","next","pipe","fromOneTimeEvent","Promise","resolve","listeners","listenersAny","listenersAnyOutgoing","off","offAny","onAny","onAnyOutgoing","prependAny","prependAnyOutgoing","timeout","value","volatile","SocketFactory","SOCKET_CONFIG_TOKEN","SocketIoModule","forRoot","ngModule","providers","provide","useValue","useFactory","deps","ɵfac","ɵmod","ɵinj","type","args","Socket"],"sources":["/home/oumaima/Documents/MON_PFA/front/node_modules/ngx-socket-io/fesm2022/ngx-socket-io.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { InjectionToken, NgModule } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { share } from 'rxjs/operators';\nimport * as io from 'socket.io-client';\n\nclass WrappedSocket {\n    config;\n    subscribersCounter = {};\n    eventObservables$ = {};\n    ioSocket;\n    emptyConfig = {\n        url: '',\n        options: {},\n    };\n    constructor(config) {\n        this.config = config;\n        if (config === undefined) {\n            config = this.emptyConfig;\n        }\n        const url = config.url;\n        const options = config.options;\n        const ioFunc = io.default ? io.default : io;\n        this.ioSocket = ioFunc(url, options);\n    }\n    of(namespace) {\n        this.ioSocket.of(namespace);\n    }\n    on(eventName, callback) {\n        this.ioSocket.on(eventName, callback);\n    }\n    once(eventName, callback) {\n        this.ioSocket.once(eventName, callback);\n    }\n    connect(callback) {\n        return this.ioSocket.connect(callback);\n    }\n    disconnect(_close) {\n        return this.ioSocket.disconnect.apply(this.ioSocket, arguments);\n    }\n    emit(_eventName, ..._args) {\n        return this.ioSocket.emit.apply(this.ioSocket, arguments);\n    }\n    removeListener(_eventName, _callback) {\n        return this.ioSocket.removeListener.apply(this.ioSocket, arguments);\n    }\n    removeAllListeners(_eventName) {\n        return this.ioSocket.removeAllListeners.apply(this.ioSocket, arguments);\n    }\n    fromEvent(eventName) {\n        if (!this.subscribersCounter[eventName]) {\n            this.subscribersCounter[eventName] = 0;\n        }\n        this.subscribersCounter[eventName]++;\n        if (!this.eventObservables$[eventName]) {\n            this.eventObservables$[eventName] = new Observable((observer) => {\n                const listener = (data) => {\n                    observer.next(data);\n                };\n                this.ioSocket.on(eventName, listener);\n                return () => {\n                    this.subscribersCounter[eventName]--;\n                    if (this.subscribersCounter[eventName] === 0) {\n                        this.ioSocket.removeListener(eventName, listener);\n                        delete this.eventObservables$[eventName];\n                    }\n                };\n            }).pipe(share());\n        }\n        return this.eventObservables$[eventName];\n    }\n    fromOneTimeEvent(eventName) {\n        return new Promise(resolve => this.once(eventName, resolve));\n    }\n    listeners(eventName) {\n        return this.ioSocket.listeners(eventName);\n    }\n    listenersAny() {\n        return this.ioSocket.listenersAny();\n    }\n    listenersAnyOutgoing() {\n        return this.ioSocket.listenersAnyOutgoing();\n    }\n    off(eventName, listener) {\n        if (!eventName) {\n            // Remove all listeners for all events\n            return this.ioSocket.offAny();\n        }\n        if (eventName && !listener) {\n            // Remove all listeners for that event\n            return this.ioSocket.off(eventName);\n        }\n        // Removes the specified listener from the listener array for the event named\n        return this.ioSocket.off(eventName, listener);\n    }\n    onAny(callback) {\n        return this.ioSocket.onAny(callback);\n    }\n    onAnyOutgoing(callback) {\n        return this.ioSocket.onAnyOutgoing(callback);\n    }\n    prependAny(callback) {\n        return this.ioSocket.prependAny(callback);\n    }\n    prependAnyOutgoing(callback) {\n        return this.ioSocket.prependAnyOutgoing(callback);\n    }\n    timeout(value) {\n        return this.ioSocket.timeout(value);\n    }\n    volatile() {\n        return this.ioSocket.volatile;\n    }\n}\n\n/** Socket factory */\nfunction SocketFactory(config) {\n    return new WrappedSocket(config);\n}\nconst SOCKET_CONFIG_TOKEN = new InjectionToken('__SOCKET_IO_CONFIG__');\nclass SocketIoModule {\n    static forRoot(config) {\n        return {\n            ngModule: SocketIoModule,\n            providers: [\n                { provide: SOCKET_CONFIG_TOKEN, useValue: config },\n                {\n                    provide: WrappedSocket,\n                    useFactory: SocketFactory,\n                    deps: [SOCKET_CONFIG_TOKEN],\n                },\n            ],\n        };\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.0\", ngImport: i0, type: SocketIoModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.0.0\", ngImport: i0, type: SocketIoModule });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.0.0\", ngImport: i0, type: SocketIoModule });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.0\", ngImport: i0, type: SocketIoModule, decorators: [{\n            type: NgModule,\n            args: [{}]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { WrappedSocket as Socket, SocketIoModule };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}